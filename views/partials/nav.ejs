<nav>
    <ul>
        <%
        const img = (userProfile)? userProfile:"avartar.png"        
        %>
        <li class="logo"><a href="/">TKO</a></li>
        <li><a href="#">ตารางการแข่งขัน</a></li>
        <li><a href="/athletes">นักกีฬา</a></li>
        <li><a href="#">เกี่ยวกับเรา</a></li>
        <%if(userRole==1){%>
            <li><a href="/admin">admin</a></li>
        <%}%>
        <% if(signedIn){%>
            <div class="nav-profile">
                <img id="profile-img" src="/images/profile/<%=img%>" alt="user-profile">
            </div>
            <div class="toggle-profile">
                <div class="toggle-avartar">
                    <img src="/images/profile/<%=img%>" alt="user-profile"><span class="user-name"><%= userName%></span>
                </div>
                <div class="toggle-setting">
                    <div class="font-bg">
                        <i class="bi bi-gear-fill"></i>
                    </div>
                    <span>ตั้งค่าโปรไฟล์</span>
                </div>
                <div class="toggle-setting logout">
                    <div class="font-bg">
                        <i class="bi bi-box-arrow-right"></i></i>
                    </div>
                    <span>ออกจากระบบ</span>
                </div>
            </div>
        <%}%>
        <%if(!signedIn){%>
            <li><a href="/authen/signin"><button class="btn btn-outline-light">Sign In</button></a></li>
        <%}%>
    </ul>
</nav>
<script>
    let profileImg =  document.querySelector("#profile-img")
    profileImg.addEventListener('click',()=>{
        const toggleProfile = document.querySelector(".toggle-profile")
        const className = toggleProfile.className
        setTimeout(()=>{
            profileImg.style.opacity = "0.2"
            profileImg.style.width = "30px"
            profileImg.style.height = "30px"
            setTimeout(()=>{
                profileImg.style.opacity = "1"
                profileImg.style.width = "35px"
                profileImg.style.height = "35px"
                if(className.includes("toggle-on")){
                    toggleProfile.className = "toggle-profile"
                }else{
                    toggleProfile.className = "toggle-profile toggle-on"
                }
            }, 40)
        }, 40)
    })

    document.querySelector(".logout").addEventListener("click", ()=>{
        window.location.href = "/signout"
    })
    document.querySelector(".toggle-avartar").addEventListener("click", ()=>{
        window.location.href = "/profile"
    })
</script>